const canvas = {
    "metadata": {
        "project": "Mason",
        "domain": "Construction Technology - SaaS",
        "methodology": "Business Model Canvas (Alexander Osterwalder)",
        "version": "2.0",
        "generated_by": "Strategy Agent (Gemini-powered)",
        "generated_at": new Date().toISOString(),
        "patterns_applied": ["Freemium", "Multi-Sided Platform", "SaaS Subscription"]
    },
    "customer_segments": {
        "title": "Segmentos de Clientes",
        "content": [
            "ğŸ¢ Empresas de ConstruÃ§Ã£o Civil (20-200 colaboradores) - GestÃ£o de mÃºltiplos projetos com controlo rigoroso de custos",
            "ğŸ‘· Gestores de Obra e Diretores TÃ©cnicos - ResponsÃ¡veis por execuÃ§Ã£o e controlo orÃ§amental em tempo real",
            "ğŸ“Š OrÃ§amentistas e Departamentos de Compras - PreparaÃ§Ã£o de propostas comerciais competitivas",
            "ğŸ—ï¸ Gabinetes de Arquitetura e Engenharia - Estimativa de custos para projetos de clientes",
            "ğŸ’¼ Promotores ImobiliÃ¡rios - Controlo de investimentos e previsÃ£o de rentabilidade",
            "ğŸ”§ Subempreiteiros Especializados - ExtraÃ§Ã£o rÃ¡pida de mediÃ§Ãµes especÃ­ficas"
        ]
    },
    "value_propositions": {
        "title": "Propostas de Valor",
        "content": [
            "ğŸ¤– AutomatizaÃ§Ã£o Inteligente com IA - ReduÃ§Ã£o de 80% do tempo vs. anÃ¡lise manual",
            "ğŸ¯ CategorizaÃ§Ã£o AutomÃ¡tica por Especialidades - Elimina 100% do trabalho repetitivo",
            "ğŸ“Š Dashboards Visuais e Intuitivos - DecisÃµes 3x mais rÃ¡pidas",
            "ğŸ‘¥ ColaboraÃ§Ã£o em Tempo Real - MÃºltiplos utilizadores com controlo de versÃµes",
            "âœ… PrecisÃ£o e ReduÃ§Ã£o de Erros - ReduÃ§Ã£o de 60% na margem de erro",
            "ğŸ”— IntegraÃ§Ã£o Nativa - Conectores com Excel, AutoCAD, Primavera, PHC, SAP"
        ]
    },
    "channels": {
        "title": "Canais",
        "content": [
            "ğŸŒ Website Corporativo + SEO - Portal otimizado com demos interativas",
            "ğŸ’¼ LinkedIn + Marketing B2B - Campanhas segmentadas e webinars mensais",
            "ğŸ¤ Parcerias com AssociaÃ§Ãµes - AICCOPN, APPC, Ordem dos Engenheiros",
            "ğŸ“ Equipa de Vendas Direta B2B - Demos personalizadas e onboarding",
            "ğŸ›’ Marketplace de Software - PresenÃ§a em Capterra, GetApp",
            "ğŸ Programa de Referral - 20% desconto + â‚¬500 crÃ©dito"
        ]
    },
    "customer_relationships": {
        "title": "RelaÃ§Ãµes com Clientes",
        "content": [
            "ğŸ“ Onboarding Personalizado - Customer Success Manager dedicado (30-60 dias)",
            "ğŸ†˜ Suporte TÃ©cnico Multi-Canal - Chat, email, telefone com SLA <2h",
            "ğŸ‘¥ Comunidade de Utilizadores - FÃ³rum com 500+ membros ativos",
            "ğŸ“ˆ Account Management Proativo - RevisÃµes trimestrais (QBRs)",
            "ğŸ”¬ Programa de Co-CriaÃ§Ã£o Beta - Top 10% participa no roadmap",
            "ğŸ¥ FormaÃ§Ã£o ContÃ­nua - Webinars mensais e certificaÃ§Ã£o Mason Expert"
        ]
    },
    "revenue_streams": {
        "title": "Fontes de Receita",
        "content": [
            "ğŸ’³ SubscriÃ§Ã£o SaaS - Freemium + â‚¬29/â‚¬79/â‚¬149 por utilizador/mÃªs",
            "ğŸ¢ Contratos Enterprise - â‚¬15k-â‚¬150k anuais customizados",
            "âš™ï¸ ServiÃ§os de ImplementaÃ§Ã£o - â‚¬2k-â‚¬15k one-time fees",
            "ğŸ›ï¸ Marketplace de Add-ons - ComissÃ£o 25-30% sobre integraÃ§Ãµes",
            "ğŸ“Š Consultoria em Processos - â‚¬150/hora ou pacotes",
            "ğŸ·ï¸ Licenciamento White-Label - â‚¬5k setup + â‚¬2k/mÃªs + 10% revenue share"
        ]
    },
    "key_resources": {
        "title": "Recursos-Chave",
        "content": [
            "ğŸ§  Algoritmos de IA - Modelos treinados com 10.000+ mapas de quantidades",
            "ğŸ“š Base de Dados de Especialidades - 50+ categorias de construÃ§Ã£o",
            "ğŸ‘¨â€ğŸ’» Equipa Especializada - 8 developers, 2 data scientists, 2 designers",
            "â˜ï¸ Infraestrutura AWS - Serverless, 99.9% uptime, ISO 27001",
            "ğŸ” Propriedade Intelectual - 2 patentes pendentes sobre algoritmos",
            "ğŸ¤ Rede de Parceiros - Primavera, AICCOPN, Saint-Gobain, IST"
        ]
    },
    "key_activities": {
        "title": "Atividades-Chave",
        "content": [
            "ğŸ’» Desenvolvimento Ãgil - Sprints quinzenais com deploy contÃ­nuo",
            "ğŸ¤– Treino de IA - Refinamento mensal de modelos (92% â†’ 95% accuracy)",
            "ğŸ“ˆ AquisiÃ§Ã£o de Clientes - Marketing + demos (25% conversÃ£o)",
            "ğŸ¯ Customer Success - MonitorizaÃ§Ã£o proativa, 90% retention",
            "ğŸ”— GestÃ£o de IntegraÃ§Ãµes - 15+ conectores ativos mantidos",
            "ğŸ”¬ InvestigaÃ§Ã£o de Mercado - AnÃ¡lise trimestral de tendÃªncias"
        ]
    },
    "key_partnerships": {
        "title": "Parcerias-Chave",
        "content": [
            "ğŸ’¼ ERPs de ConstruÃ§Ã£o - Primavera, PHC, SAP (5.000+ empresas)",
            "ğŸ›ï¸ AssociaÃ§Ãµes Profissionais - AICCOPN, Ordem dos Engenheiros",
            "ğŸ—ï¸ Distribuidores de Materiais - Saint-Gobain, Leroy Merlin (50k produtos)",
            "ğŸ“ Universidades - IST, FEUP para I&D e recrutamento",
            "â˜ï¸ Cloud Providers - AWS ($100k crÃ©ditos), Stripe, Intercom",
            "ğŸ¤ Consultoras - Deloitte, PwC para clientes enterprise"
        ]
    },
    "cost_structure": {
        "title": "Estrutura de Custos",
        "content": [
            "ğŸ‘¨â€ğŸ’» Desenvolvimento (40% - â‚¬240k/ano) - SalÃ¡rios + ferramentas",
            "â˜ï¸ Infraestrutura (15% - â‚¬90k/ano) - AWS escalÃ¡vel (â‚¬3/user/mÃªs)",
            "ğŸ“¢ Vendas e Marketing (25% - â‚¬150k/ano) - Sales team + campanhas",
            "ğŸ¯ Customer Success (10% - â‚¬60k/ano) - Suporte + ferramentas",
            "ğŸ¢ OperaÃ§Ãµes (5% - â‚¬30k/ano) - Contabilidade, legal, escritÃ³rio",
            "ğŸ”¬ I&D e InovaÃ§Ã£o (5% - â‚¬30k/ano) - Projetos, conferÃªncias, formaÃ§Ã£o"
        ]
    }
};

fetch('http://localhost:3001/api/projects/879e8a61-14af-471b-9783-ce444e390163/business-model', {
    method: 'PATCH',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ businessModel: JSON.stringify(canvas) })
})
    .then(r => r.json())
    .then(d => {
        console.log('âœ… SUCCESS!', d);
        console.log('Refresh the page: http://localhost:5175');
    })
    .catch(e => console.error('âŒ ERROR:', e));
